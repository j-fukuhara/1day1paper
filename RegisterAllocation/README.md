# RL4REAL: Reinforcement Learning for Register Allocation
  * S. VenkataKeerthy et al.
  * [ACM Compiler Construction 2023 (CC 2023)](https://doi.org/10.1145/3578360.3580273)
  
## Abstract
  * **機械学習をレジスタ割付け問題に適用する**ことを目的とする．
  * LLVMにマルチエージェント強化学習を実装した．
  * 与えられたISAに対する問題を，コードの意味を変えずに，正確に定義する制約を定式化した．
  * 提案手法は，アーキテクチャに非依存である．
  * 実験では，Intel x86とARM AArch64のアーキテクチャに対して，LLVMの非常に良くチューニングされたレジスタ割付け器と同等以上のパフォーマンスを示した．
  * レジスタ割付け問題はグラフ彩色問題に帰着するが，これはNP完全問題である．
  * 他にも制約に基づく最適化や，ILP(Integer Linear Programming)，PBQPで解くものがある．

---

# Register Allocation for Compressed ISAs in LLVM
  * A. Fried et al.
  * [ACM Compiler Construction 2023 (CC 2023)](https://doi.org/10.1145/3578360.3580261)

## Abstract
  * LLVMのgreedyレジスタ割付け器を，RISC ISA向けに**コード密度**(*code density*)を向上させるように拡張した．
  * 多くのRISC ISAには，16ビット幅でアクセスする命令のための，より小さいエンコードを定義する拡張がある．
  * しかし，一般的には，それらの命令はプロセッサの全てのレジスタにアクセスできるわけではない．
  * さらに，二項演算に対してでも，２つレジスタを指定する余地しかない場合がある．
  * レジスタ割付け器がこれらの制限を把握していると，命令の**圧縮可能性**（*compressibility*）を解析でき，できるだけ多くの命令がより小さいエンコーディングを使えるようにレジスタを割り付けできる．
  * より圧縮された命令を有効にするために、**LLVMのgreedyレジスタ割付け器の4つの側面を調整**した．
    1. より早い割当てのために、多くの潜在的に圧縮可能な命令を持つ仮想レジスタに優先順位を付ける．
    2. 圧縮された命令の数が最大になるようにレジスタを選ぶ．
    3. どの仮想レジスタをスピルするか決める際に，compressibilityを考慮する．
    4. より多くのレジスタコピーとより多くの圧縮機会を比較検討する．
  * 実験では，**提案手法をLLVMのRISC-Vバックエンドを用いて評価**した．
  * SPEC2000とSPEC2006ベンチマークに対して，幾何平均で1.93%小さいバイナリを生成できた．
  * 小さく生成したバイナリは，最大で1.5%の実行時間の変動があった．
  * LLVMのスピルメトリクスに対して解析した結果，その影響はおそらくレジスタ割り当てヒューリスティックのランダムな変動によるものであると結論づけた．
